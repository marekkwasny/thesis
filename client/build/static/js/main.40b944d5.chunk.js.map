{"version":3,"sources":["utils/token.js","graphql/user.js","routes/UserRoute.js","routes/PublicRoute.js","components/Header.js","graphql/post.js","components/PostCreator.js","graphql/like.js","components/Post.js","components/PostsData.js","views/home.js","views/login.js","utils/email.js","views/register.js","components/cqrs/PostCreator1.js","components/cqrs/Post1.js","components/cqrs/PostsData1.js","views/cqrs/home1.js","components/cqrs/PostCreator2.js","components/cqrs/Post2.js","components/cqrs/PostsData2.js","views/cqrs/home2.js","components/cqrs/PostCreator3.js","components/cqrs/Post3.js","components/cqrs/PostsData3.js","views/cqrs/home3.js","components/Routes.js","utils/theme.js","components/App.js","utils/links.js","index.js"],"names":["accessToken","setAccessToken","token","getAccessToken","meQuery","gql","createUserMutation","loginUserMutation","logoutUserMutation","fullLogoutUserMutation","UserRoute","Component","component","rest","cache","client","readQuery","query","data","useQuery","fetchPolicy","skip","isUser","me","render","props","to","pathname","state","from","location","PublicRoute","useStyles","makeStyles","root","flexGrow","title","button","margin","color","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","in","Header","classes","history","useHistory","useMutation","logout","fullLogout","block","AppBar","position","Toolbar","Typography","variant","className","name","Button","onClick","a","push","refetch","resetStore","postsQuery","postsOneQuery","postsTwoQuery","postsThreeQuery","createPostQuery","createPostOneQuery","createPostTwoQuery","createPostThreeQuery","PostCreator","user","createPost","useState","content","setContent","submit","useRef","style","marginTop","Container","onSubmitCapture","e","preventDefault","variables","current","visibility","TextField","multiline","fullWidth","placeholder","minRows","value","textAlign","onChange","target","ref","type","likePost","likePostOne","likePostTwo","likePostThree","unlikePost","unlikePostOne","unlikePostTwo","unlikePostThree","post","maxWidth","minWidth","Post","item","isLikedByUser","Favorite","FavoriteBorder","likeButton","setLikeButton","likes","likeButtonText","setLikeButtonText","like","unlike","Grid","xs","Paper","elevation","ListItem","ListItemText","wordWrap","primary","secondary","ListItemIcon","IconButton","size","parseInt","id","icon","text","IconText","React","createElement","PostsData","loading","fetchMore","posts","map","x","i","Fragment","List","hasMore","length","onEnter","limit","cursor","updateQuery","pv","fetchMoreResult","__typename","Home","theme","paper","spacing","display","flexDirection","alignItems","avatar","backgroundColor","palette","main","form","width","Login","email","setEmail","password","setPassword","login","Avatar","noValidate","update","store","loginUser","writeQuery","response","clearStore","required","label","autoComplete","autoFocus","container","textDecoration","isEmailValid","test","Register","setName","register","justifyContent","PostCreatorOne","PostOne","PostsDataOne","postsOne","HomeOne","PostCreatorTwo","PostTwo","PostsDataTwo","postsTwo","HomeTwo","PostCreatorThree","PostThree","PostsDataThree","postsThree","HomeThree","Routes","exact","path","darkTheme","createTheme","App","setLoading","useEffect","fetch","method","credentials","then","json","ThemeProvider","CssBaseline","httpLink","HttpLink","uri","authLink","ApolloLink","operation","forward","setContext","headers","Authorization","tokenRefreshLink","TokenRefreshLink","accessTokenField","isTokenValidOrUndefined","exp","jwtDecode","Date","now","isAccessTokenValid","fetchAccessToken","handleFetch","ApolloClient","InMemoryCache","typePolicies","keyFields","link","ReactDOM","StrictMode","ApolloProvider","document","getElementById"],"mappings":"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","file":"static/js/main.40b944d5.chunk.js","sourcesContent":["import jwtDecode from 'jwt-decode';\r\n\r\nlet accessToken = '';\r\n\r\nexport function setAccessToken(token) {\r\n    accessToken = token;\r\n}\r\n\r\nexport function getAccessToken() {\r\n    return accessToken;\r\n}\r\n\r\nexport function isAccessTokenValid() {\r\n    const accessToken = getAccessToken();\r\n\r\n    if (!accessToken) {\r\n        return true;\r\n    }\r\n\r\n    try {\r\n        const { exp } = jwtDecode(accessToken);\r\n        return Date.now() < exp * 1000;\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const meQuery = gql`\r\n    {\r\n        me {\r\n            id\r\n            name\r\n            email\r\n        }\r\n    }\r\n`;\r\n\r\nexport const usersQuery = gql`\r\n    {\r\n        users {\r\n            id\r\n            name\r\n            email\r\n        }\r\n    }\r\n`;\r\n\r\nexport const createUserMutation = gql`\r\n    mutation createUser($name: String!, $email: String!, $password: String!) {\r\n        createUser(user: { name: $name, email: $email, password: $password }) {\r\n            id\r\n            name\r\n            email\r\n        }\r\n    }\r\n`;\r\n\r\nexport const loginUserMutation = gql`\r\n    mutation loginUser($email: String!, $password: String!) {\r\n        loginUser(email: $email, password: $password) {\r\n            accessToken\r\n            user {\r\n                id\r\n                name\r\n                email\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const logoutUserMutation = gql`\r\n    mutation {\r\n        logoutUser\r\n    }\r\n`;\r\n\r\nexport const fullLogoutUserMutation = gql`\r\n    mutation {\r\n        fullLogoutUser\r\n    }\r\n`;\r\n","import { useQuery } from '@apollo/react-hooks';\r\nimport React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { client } from '..';\r\nimport { meQuery } from '../graphql/user';\r\n\r\nexport const UserRoute = ({ component: Component, ...rest }) => {\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    const { data } = useQuery(meQuery, {\r\n        fetchPolicy: 'network-only',\r\n        skip: cache,\r\n    });\r\n\r\n    let isUser = false;\r\n\r\n    if ((cache && cache.me) || (data && data.me)) {\r\n        isUser = true;\r\n    }\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                isUser ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/login',\r\n                            state: { from: props.location },\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { client } from '..';\r\nimport { meQuery } from '../graphql/user';\r\nimport { useQuery } from '@apollo/react-hooks';\r\n\r\nexport const PublicRoute = ({ component: Component, ...rest }) => {\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    const { data } = useQuery(meQuery, {\r\n        fetchPolicy: 'network-only',\r\n        skip: cache,\r\n    });\r\n\r\n    let isUser = false;\r\n\r\n    if ((cache && cache.me) || (data && data.me)) {\r\n        isUser = true;\r\n    }\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                !isUser ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/',\r\n                            state: { from: props.location },\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n","import { useMutation, useQuery } from '@apollo/react-hooks';\r\nimport { AppBar, Button, makeStyles, Toolbar, Typography } from '@material-ui/core';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { fullLogoutUserMutation, logoutUserMutation, meQuery } from '../graphql/user';\r\nimport { setAccessToken } from '../utils/token';\r\nimport { useScrollTrigger, Slide } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n    button: {\r\n        margin: 5,\r\n        color: 'inherit',\r\n    },\r\n}));\r\n\r\nfunction HideOnScroll(props) {\r\n    const { children } = props;\r\n    const trigger = useScrollTrigger();\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children}\r\n        </Slide>\r\n    );\r\n}\r\n\r\nexport function Header(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [logout, { client }] = useMutation(logoutUserMutation);\r\n    const [fullLogout] = useMutation(fullLogoutUserMutation);\r\n\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    const { data } = useQuery(meQuery, {\r\n        fetchPolicy: 'network-only',\r\n        skip: cache,\r\n    });\r\n\r\n    let isUser = false;\r\n\r\n    if ((cache && cache.me) || (data && data.me)) {\r\n        isUser = true;\r\n    }\r\n\r\n    if (isUser) {\r\n        return (\r\n            <HideOnScroll {...props} block=\"true\">\r\n                <AppBar position=\"fixed\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h5\" className={classes.title}>\r\n                            Hello, {cache.me.name}!\r\n                        </Typography>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                history.push({\r\n                                    pathname: '/',\r\n                                    state: { refetch: true },\r\n                                });\r\n                            }}\r\n                        >\r\n                            Home\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                history.push({\r\n                                    pathname: '/cqrs1',\r\n                                    state: { refetch: true },\r\n                                });\r\n                            }}\r\n                        >\r\n                            CQRS 1\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                history.push({\r\n                                    pathname: '/cqrs2',\r\n                                    state: { refetch: true },\r\n                                });\r\n                            }}\r\n                        >\r\n                            CQRS 2\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                history.push({\r\n                                    pathname: '/cqrs3',\r\n                                    state: { refetch: true },\r\n                                });\r\n                            }}\r\n                        >\r\n                            CQRS 3\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                await logout();\r\n                                setAccessToken('');\r\n                                await client.resetStore();\r\n                                history.push('/login');\r\n                            }}\r\n                        >\r\n                            Logout\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            onClick={async () => {\r\n                                await fullLogout();\r\n                                setAccessToken('');\r\n                                await client.resetStore();\r\n                                history.push('/login');\r\n                            }}\r\n                        >\r\n                            Logout everywhere\r\n                        </Button>\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </HideOnScroll>\r\n        );\r\n    } else {\r\n        return (\r\n            <header>\r\n                <div>\r\n                    <Link to={'/login'}>login</Link>\r\n                </div>\r\n                <div>\r\n                    <Link to={'/register'}>register</Link>\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const postsQuery = gql`\r\n    query posts($user: ID!, $limit: Int!, $cursor: Int!) {\r\n        posts(user: $user, limit: $limit, cursor: $cursor) {\r\n            hasMore\r\n            posts {\r\n                id\r\n                content\r\n                likes\r\n                userRequesting\r\n                isLikedByUser\r\n                user {\r\n                    id\r\n                    name\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const postsOneQuery = gql`\r\n    query postsOne($user: ID!, $limit: Int!, $cursor: Int!) {\r\n        postsOne(user: $user, limit: $limit, cursor: $cursor) {\r\n            hasMore\r\n            posts {\r\n                id\r\n                content\r\n                likes\r\n                userRequesting\r\n                isLikedByUser\r\n                user {\r\n                    id\r\n                    name\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const postsTwoQuery = gql`\r\n    query postsTwo($user: ID!, $limit: Int!, $cursor: Int!) {\r\n        postsTwo(user: $user, limit: $limit, cursor: $cursor) {\r\n            hasMore\r\n            posts {\r\n                id\r\n                content\r\n                likes\r\n                userRequesting\r\n                isLikedByUser\r\n                user {\r\n                    id\r\n                    name\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const postsThreeQuery = gql`\r\n    query postsThree($user: ID!, $limit: Int!, $cursor: Int!) {\r\n        postsThree(user: $user, limit: $limit, cursor: $cursor) {\r\n            hasMore\r\n            posts {\r\n                id\r\n                content\r\n                likes\r\n                userRequesting\r\n                isLikedByUser\r\n                user {\r\n                    id\r\n                    name\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const createPostQuery = gql`\r\n    mutation createPost($user: ID!, $content: String!) {\r\n        createPost(user: $user, content: $content) {\r\n            id\r\n            content\r\n        }\r\n    }\r\n`;\r\n\r\nexport const createPostOneQuery = gql`\r\n    mutation createPostOne($user: ID!, $content: String!) {\r\n        createPostOne(user: $user, content: $content) {\r\n            id\r\n            content\r\n        }\r\n    }\r\n`;\r\n\r\nexport const createPostTwoQuery = gql`\r\n    mutation createPostTwo($user: ID!, $content: String!) {\r\n        createPostTwo(user: $user, content: $content)\r\n    }\r\n`;\r\n\r\nexport const createPostThreeQuery = gql`\r\n    mutation createPostThree($user: ID!, $content: String!) {\r\n        createPostThree(user: $user, content: $content)\r\n    }\r\n`;\r\n","import { useMutation } from '@apollo/client';\r\nimport { useRef, useState } from 'react';\r\nimport { createPostQuery } from '../graphql/post';\r\nimport { TextField, Button, Container } from '@material-ui/core';\r\n\r\nexport function PostCreator({ user, refetch }) {\r\n    const [createPost] = useMutation(createPostQuery);\r\n    const [content, setContent] = useState('');\r\n    const submit = useRef(0);\r\n\r\n    return (\r\n        <div style={{ marginTop: 50 }}>\r\n            <Container>\r\n                <form\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n\r\n                        if (user !== null) {\r\n                            await createPost({\r\n                                variables: {\r\n                                    user,\r\n                                    content,\r\n                                },\r\n                            });\r\n\r\n                            refetch();\r\n                            setContent('');\r\n                            submit.current.style.visibility = 'hidden';\r\n                        }\r\n                    }}\r\n                >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        multiline\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        placeholder=\"Create your post\"\r\n                        minRows={4}\r\n                        value={content}\r\n                        style={{ textAlign: 'left' }}\r\n                        onChange={(e) => {\r\n                            submit.current.style.visibility = !e.target.value ? 'hidden' : 'visible';\r\n                            setContent(e.target.value);\r\n                        }}\r\n                    />\r\n                    <center>\r\n                        <Button\r\n                            ref={submit}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            type=\"primary\"\r\n                            style={{ visibility: 'hidden' }}\r\n                        >\r\n                            create a post\r\n                        </Button>\r\n                    </center>\r\n                </form>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const likePost = gql`\r\n    mutation likePost($user: ID!, $post: ID!) {\r\n        likePost(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const likePostOne = gql`\r\n    mutation likePostOne($user: ID!, $post: ID!) {\r\n        likePostOne(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const likePostTwo = gql`\r\n    mutation likePostTwo($user: ID!, $post: ID!) {\r\n        likePostTwo(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const likePostThree = gql`\r\n    mutation likePostThree($user: ID!, $post: ID!) {\r\n        likePostThree(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const unlikePost = gql`\r\n    mutation unlikePost($user: ID!, $post: ID!) {\r\n        unlikePost(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const unlikePostOne = gql`\r\n    mutation unlikePostOne($user: ID!, $post: ID!) {\r\n        unlikePostOne(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const unlikePostTwo = gql`\r\n    mutation unlikePostTwo($user: ID!, $post: ID!) {\r\n        unlikePostTwo(user: $user, post: $post)\r\n    }\r\n`;\r\n\r\nexport const unlikePostThree = gql`\r\n    mutation unlikePostThree($user: ID!, $post: ID!) {\r\n        unlikePostThree(user: $user, post: $post)\r\n    }\r\n`;\r\n","import React, { useState } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport { likePost, unlikePost } from '../graphql/like';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, IconButton, Grid, ListItem, ListItemText, ListItemIcon } from '@material-ui/core';\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles({\r\n    post: {\r\n        maxWidth: 1250,\r\n        minWidth: 100,\r\n        marginTop: 15,\r\n    },\r\n});\r\n\r\nexport function Post({ item, user }) {\r\n    const classes = useStyles();\r\n    const [likeButton, setLikeButton] = useState(item.isLikedByUser ? Favorite : FavoriteBorder);\r\n    const [likeButtonText, setLikeButtonText] = useState(item.likes);\r\n    const [like] = useMutation(likePost);\r\n    const [unlike] = useMutation(unlikePost);\r\n\r\n    return (\r\n        <Grid item xs>\r\n            <Paper elevation={3} className={classes.post}>\r\n                <ListItem>\r\n                    <ListItemText\r\n                        style={{ wordWrap: 'break-word' }}\r\n                        primary={item.user.name}\r\n                        secondary={item.content}\r\n                    />\r\n                    <ListItemIcon>\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            key={item.id}\r\n                            onClick={async () => {\r\n                                if (likeButton === Favorite) {\r\n                                    setLikeButton(FavoriteBorder);\r\n                                    setLikeButtonText(parseInt(likeButtonText) - 1);\r\n                                    await unlike({ variables: { user: user, post: item.id } });\r\n                                } else {\r\n                                    setLikeButton(Favorite);\r\n                                    setLikeButtonText(parseInt(likeButtonText) + 1);\r\n                                    await like({ variables: { user: user, post: item.id } });\r\n                                }\r\n                            }}\r\n                        >\r\n                            <IconText icon={likeButton} text={likeButtonText} key={item.id} />\r\n                        </IconButton>\r\n                    </ListItemIcon>\r\n                </ListItem>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nconst IconText = ({ icon, text }) => (\r\n    <div>\r\n        {React.createElement(icon)}\r\n        {text}\r\n    </div>\r\n);\r\n","import React from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport { Post } from './Post';\r\nimport { List } from '@material-ui/core';\r\n\r\nexport const PostsData = ({ user, loading, data, fetchMore }) => {\r\n    if (loading) return <div>...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <center>\r\n                {data.posts.posts.map((x, i) => (\r\n                    <React.Fragment key={`${i}-${user}-${x.id}`}>\r\n                        <List>\r\n                            <Post item={x} user={user} />\r\n                        </List>\r\n                        {data.posts.hasMore && i === data.posts.posts.length - 5 && (\r\n                            <Waypoint\r\n                                onEnter={() => {\r\n                                    fetchMore({\r\n                                        variables: {\r\n                                            user: user,\r\n                                            limit: 5,\r\n                                            cursor: parseInt(data.posts.posts[data.posts.posts.length - 1].id),\r\n                                        },\r\n                                        updateQuery: (pv, { fetchMoreResult }) => {\r\n                                            if (!fetchMoreResult) {\r\n                                                return pv;\r\n                                            }\r\n\r\n                                            return {\r\n                                                posts: {\r\n                                                    __typename: 'PostsType',\r\n                                                    hasMore: fetchMoreResult.posts.hasMore,\r\n                                                    posts: [...pv.posts.posts, ...fetchMoreResult.posts.posts],\r\n                                                },\r\n                                            };\r\n                                        },\r\n                                    });\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </React.Fragment>\r\n                ))}\r\n            </center>\r\n        </div>\r\n    );\r\n};\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { client } from '..';\r\nimport { Header } from '../components/Header';\r\nimport { PostCreator } from '../components/PostCreator';\r\nimport { PostsData } from '../components/PostsData';\r\nimport { postsQuery } from '../graphql/post';\r\nimport { meQuery } from '../graphql/user';\r\n\r\nexport function Home() {\r\n    const [state, setState] = useState(0);\r\n\r\n    let user = null;\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    if (cache && cache.me) {\r\n        user = cache.me.id;\r\n    }\r\n\r\n    const query = useQuery(meQuery, {\r\n        skip: cache,\r\n    });\r\n\r\n    if (query && query.me) {\r\n        user = query.me.id;\r\n    }\r\n\r\n    const { loading, data, fetchMore, refetch } = useQuery(postsQuery, {\r\n        variables: {\r\n            user: user,\r\n            limit: 5,\r\n            cursor: 0,\r\n        },\r\n        fetchPolicy: 'network-only',\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Header props />\r\n            </div>\r\n            <br />\r\n            <div>\r\n                <PostCreator user={user} refetch={refetch} />\r\n                <PostsData user={user} loading={loading} data={data} fetchMore={fetchMore} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { useMutation } from '@apollo/react-hooks';\r\nimport React, { useState } from 'react';\r\nimport { client } from '..';\r\nimport { loginUserMutation, meQuery } from '../graphql/user';\r\nimport { setAccessToken } from '../utils/token';\r\nimport { Avatar, Container, Grid, makeStyles, TextField, Typography, Button } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nexport function Login({ history }) {\r\n    const classes = useStyles();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [login] = useMutation(loginUserMutation);\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <LockOutlinedIcon />\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\" color=\"textPrimary\">\r\n                    Sign in\r\n                </Typography>\r\n                <form\r\n                    className={classes.form}\r\n                    noValidate\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n                        const response = await login({\r\n                            variables: {\r\n                                email,\r\n                                password,\r\n                            },\r\n                            update: (store, { data }) => {\r\n                                if (!data.loginUser) {\r\n                                    return null;\r\n                                }\r\n                                store.writeQuery({\r\n                                    query: meQuery,\r\n                                    data: {\r\n                                        me: data.loginUser.user,\r\n                                    },\r\n                                });\r\n                            },\r\n                        });\r\n\r\n                        if (response && response.data.loginUser) {\r\n                            setAccessToken(response.data.loginUser.accessToken);\r\n                        }\r\n\r\n                        await client.clearStore();\r\n                        history.push('/');\r\n                    }}\r\n                >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"email\"\r\n                        label=\"Email Address\"\r\n                        name=\"email\"\r\n                        autoComplete=\"email\"\r\n                        autoFocus\r\n                        onChange={(e) => {\r\n                            setEmail(e.target.value);\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        name=\"password\"\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        onChange={(e) => {\r\n                            setPassword(e.target.value);\r\n                        }}\r\n                    />\r\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\r\n                        Sign In\r\n                    </Button>\r\n                    <Grid container>\r\n                        <Grid item>\r\n                            <Link to={'/register'} variant=\"body2\" style={{ textDecoration: 'none' }}>\r\n                                <Typography color=\"textSecondary\">Don't have an account? Sign Up</Typography>\r\n                            </Link>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\n","export function isEmailValid(email) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n}\r\n","import { useMutation } from '@apollo/react-hooks';\r\nimport React, { useState } from 'react';\r\nimport { createUserMutation } from '../graphql/user';\r\nimport { isEmailValid } from '../utils/email';\r\nimport { Avatar, Container, Grid, makeStyles, TextField, Typography, Button } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nexport function Register({ history }) {\r\n    const classes = useStyles();\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [register] = useMutation(createUserMutation);\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <LockOutlinedIcon />\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\" color=\"textPrimary\">\r\n                    Sign up\r\n                </Typography>\r\n                <form\r\n                    className={classes.form}\r\n                    noValidate\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n\r\n                        if (isEmailValid(email)) {\r\n                            await register({\r\n                                variables: {\r\n                                    name,\r\n                                    email,\r\n                                    password,\r\n                                },\r\n                            });\r\n\r\n                            history.push('/');\r\n                        }\r\n                    }}\r\n                >\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                autoComplete=\"name\"\r\n                                name=\"name\"\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"name\"\r\n                                label=\"Name\"\r\n                                autoFocus\r\n                                onChange={(e) => {\r\n                                    setName(e.target.value);\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"email\"\r\n                                label=\"Email Address\"\r\n                                name=\"email\"\r\n                                autoComplete=\"email\"\r\n                                onChange={(e) => {\r\n                                    setEmail(e.target.value);\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                id=\"password\"\r\n                                autoComplete=\"current-password\"\r\n                                onChange={(e) => {\r\n                                    setPassword(e.target.value);\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\r\n                        Sign Up\r\n                    </Button>\r\n                    <Grid container justifyContent=\"flex-end\">\r\n                        <Grid item>\r\n                            <Link to={'/login'} variant=\"body2\" style={{ textDecoration: 'none' }}>\r\n                                <Typography color=\"textSecondary\">Already have an account? Sign in</Typography>\r\n                            </Link>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\n","import { useMutation } from '@apollo/client';\r\nimport { useRef, useState } from 'react';\r\nimport { createPostOneQuery } from '../../graphql/post';\r\nimport { TextField, Button, Container } from '@material-ui/core';\r\n\r\nexport function PostCreatorOne({ user, refetch }) {\r\n    const [createPost] = useMutation(createPostOneQuery);\r\n    const [content, setContent] = useState('');\r\n    const submit = useRef(0);\r\n\r\n    return (\r\n        <div style={{ marginTop: 50 }}>\r\n            <Container>\r\n                <form\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n\r\n                        if (user !== null) {\r\n                            await createPost({\r\n                                variables: {\r\n                                    user,\r\n                                    content,\r\n                                },\r\n                            });\r\n\r\n                            refetch();\r\n                            setContent('');\r\n                            submit.current.style.visibility = 'hidden';\r\n                        }\r\n                    }}\r\n                >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        multiline\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        placeholder=\"Create your post\"\r\n                        minRows={4}\r\n                        value={content}\r\n                        style={{ textAlign: 'left' }}\r\n                        onChange={(e) => {\r\n                            submit.current.style.visibility = !e.target.value ? 'hidden' : 'visible';\r\n                            setContent(e.target.value);\r\n                        }}\r\n                    />\r\n                    <center>\r\n                        <Button\r\n                            ref={submit}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            type=\"primary\"\r\n                            style={{ visibility: 'hidden' }}\r\n                        >\r\n                            create a post\r\n                        </Button>\r\n                    </center>\r\n                </form>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport { likePostOne, unlikePostOne } from '../../graphql/like';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, IconButton, Grid, ListItem, ListItemText, ListItemIcon } from '@material-ui/core';\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles({\r\n    post: {\r\n        maxWidth: 1250,\r\n        minWidth: 100,\r\n        marginTop: 15,\r\n    },\r\n});\r\n\r\nexport function PostOne({ item, user }) {\r\n    const classes = useStyles();\r\n    const [likeButton, setLikeButton] = useState(item.isLikedByUser ? Favorite : FavoriteBorder);\r\n    const [likeButtonText, setLikeButtonText] = useState(item.likes);\r\n    const [like] = useMutation(likePostOne);\r\n    const [unlike] = useMutation(unlikePostOne);\r\n\r\n    return (\r\n        <Grid item xs>\r\n            <Paper elevation={3} className={classes.post}>\r\n                <ListItem>\r\n                    <ListItemText\r\n                        style={{ wordWrap: 'break-word' }}\r\n                        primary={item.user.name}\r\n                        secondary={item.content}\r\n                    />\r\n                    <ListItemIcon>\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            key={`${item.id}-1`}\r\n                            onClick={async () => {\r\n                                if (likeButton === Favorite) {\r\n                                    setLikeButton(FavoriteBorder);\r\n                                    setLikeButtonText(parseInt(likeButtonText) - 1);\r\n                                    await unlike({ variables: { user: user, post: item.id } });\r\n                                } else {\r\n                                    setLikeButton(Favorite);\r\n                                    setLikeButtonText(parseInt(likeButtonText) + 1);\r\n                                    await like({ variables: { user: user, post: item.id } });\r\n                                }\r\n                            }}\r\n                        >\r\n                            <IconText icon={likeButton} text={likeButtonText} key={item.id} />\r\n                        </IconButton>\r\n                    </ListItemIcon>\r\n                </ListItem>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nconst IconText = ({ icon, text }) => (\r\n    <div>\r\n        {React.createElement(icon)}\r\n        {text}\r\n    </div>\r\n);\r\n","import React from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport { List } from '@material-ui/core';\r\nimport { PostOne } from './Post1';\r\n\r\nexport const PostsDataOne = ({ user, loading, data, fetchMore }) => {\r\n    if (loading) return <div></div>;\r\n\r\n    return (\r\n        <div>\r\n            <center>\r\n                {data.postsOne.posts.map((x, i) => (\r\n                    <React.Fragment key={`${i}-${user}-${x.id}-1`}>\r\n                        <List>\r\n                            <PostOne item={x} user={user} />\r\n                        </List>\r\n                        {data.postsOne.hasMore && i === data.postsOne.posts.length - 5 && (\r\n                            <Waypoint\r\n                                onEnter={() => {\r\n                                    fetchMore({\r\n                                        variables: {\r\n                                            user: user,\r\n                                            limit: 5,\r\n                                            cursor: parseInt(data.postsOne.posts[data.postsOne.posts.length - 1].id),\r\n                                        },\r\n                                        updateQuery: (pv, { fetchMoreResult }) => {\r\n                                            if (!fetchMoreResult) {\r\n                                                return pv;\r\n                                            }\r\n\r\n                                            return {\r\n                                                postsOne: {\r\n                                                    __typename: 'PostsType',\r\n                                                    hasMore: fetchMoreResult.postsOne.hasMore,\r\n                                                    posts: [...pv.postsOne.posts, ...fetchMoreResult.postsOne.posts],\r\n                                                },\r\n                                            };\r\n                                        },\r\n                                    });\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </React.Fragment>\r\n                ))}\r\n            </center>\r\n        </div>\r\n    );\r\n};\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { client } from '../..';\r\nimport { PostCreatorOne } from '../../components/cqrs/PostCreator1';\r\nimport { PostsDataOne } from '../../components/cqrs/PostsData1';\r\nimport { Header } from '../../components/Header';\r\nimport { postsOneQuery } from '../../graphql/post';\r\nimport { meQuery } from '../../graphql/user';\r\n\r\nexport function HomeOne() {\r\n    const [state, setState] = useState(0);\r\n\r\n    let user = null;\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    if (cache && cache.me) {\r\n        user = cache.me.id;\r\n    }\r\n\r\n    const query = useQuery(meQuery, {\r\n        skip: cache,\r\n    });\r\n\r\n    if (query && query.me) {\r\n        user = query.me.id;\r\n    }\r\n\r\n    const { loading, data, fetchMore, refetch } = useQuery(postsOneQuery, {\r\n        variables: {\r\n            user: user,\r\n            limit: 10,\r\n            cursor: 0,\r\n        },\r\n        fetchPolicy: 'network-only',\r\n    });\r\n\r\n    // const location = useLocation();\r\n    // if (location.state && location.state.refetch) {\r\n    //     setState(state + 1);\r\n    //     client.refetchQueries({ include: 'active' });\r\n    //     location.state.refetch = false;\r\n    // }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Header props />\r\n            </div>\r\n            <br />\r\n            <div>\r\n                <PostCreatorOne user={user} refetch={refetch} />\r\n                <PostsDataOne user={user} loading={loading} data={data} fetchMore={fetchMore} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { useMutation } from '@apollo/client';\r\nimport { useRef, useState } from 'react';\r\nimport { createPostTwoQuery } from '../../graphql/post';\r\nimport { TextField, Button, Container } from '@material-ui/core';\r\n\r\nexport function PostCreatorTwo({ user, refetch }) {\r\n    const [createPost] = useMutation(createPostTwoQuery);\r\n    const [content, setContent] = useState('');\r\n    const submit = useRef(0);\r\n\r\n    return (\r\n        <div style={{ marginTop: 50 }}>\r\n            <Container>\r\n                <form\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n\r\n                        if (user !== null) {\r\n                            await createPost({\r\n                                variables: {\r\n                                    user,\r\n                                    content,\r\n                                },\r\n                            });\r\n\r\n                            refetch();\r\n                            setContent('');\r\n                            submit.current.style.visibility = 'hidden';\r\n                        }\r\n                    }}\r\n                >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        multiline\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        placeholder=\"Create your post\"\r\n                        minRows={4}\r\n                        value={content}\r\n                        style={{ textAlign: 'left' }}\r\n                        onChange={(e) => {\r\n                            submit.current.style.visibility = !e.target.value ? 'hidden' : 'visible';\r\n                            setContent(e.target.value);\r\n                        }}\r\n                    />\r\n                    <center>\r\n                        <Button\r\n                            ref={submit}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            type=\"primary\"\r\n                            style={{ visibility: 'hidden' }}\r\n                        >\r\n                            create a post\r\n                        </Button>\r\n                    </center>\r\n                </form>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport { likePostTwo, unlikePostTwo } from '../../graphql/like';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, IconButton, Grid, ListItem, ListItemText, ListItemIcon } from '@material-ui/core';\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles({\r\n    post: {\r\n        maxWidth: 1250,\r\n        minWidth: 100,\r\n        marginTop: 15,\r\n    },\r\n});\r\n\r\nexport function PostTwo({ item, user }) {\r\n    const classes = useStyles();\r\n    const [likeButton, setLikeButton] = useState(item.isLikedByUser ? Favorite : FavoriteBorder);\r\n    const [likeButtonText, setLikeButtonText] = useState(item.likes);\r\n    const [like] = useMutation(likePostTwo);\r\n    const [unlike] = useMutation(unlikePostTwo);\r\n\r\n    return (\r\n        <Grid item xs>\r\n            <Paper elevation={3} className={classes.post}>\r\n                <ListItem>\r\n                    <ListItemText\r\n                        style={{ wordWrap: 'break-word' }}\r\n                        primary={item.user.name}\r\n                        secondary={item.content}\r\n                    />\r\n                    <ListItemIcon>\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            key={`${item.id}-2`}\r\n                            onClick={async () => {\r\n                                if (likeButton === Favorite) {\r\n                                    setLikeButton(FavoriteBorder);\r\n                                    setLikeButtonText(parseInt(likeButtonText) - 1);\r\n                                    await unlike({ variables: { user: user, post: item.id } });\r\n                                } else {\r\n                                    setLikeButton(Favorite);\r\n                                    setLikeButtonText(parseInt(likeButtonText) + 1);\r\n                                    await like({ variables: { user: user, post: item.id } });\r\n                                }\r\n                            }}\r\n                        >\r\n                            <IconText icon={likeButton} text={likeButtonText} key={item.id} />\r\n                        </IconButton>\r\n                    </ListItemIcon>\r\n                </ListItem>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nconst IconText = ({ icon, text }) => (\r\n    <div>\r\n        {React.createElement(icon)}\r\n        {text}\r\n    </div>\r\n);\r\n","import React from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport { List } from '@material-ui/core';\r\nimport { PostTwo } from './Post2';\r\n\r\nexport const PostsDataTwo = ({ user, loading, data, fetchMore }) => {\r\n    if (loading) return <div></div>;\r\n\r\n    return (\r\n        <div>\r\n            <center>\r\n                {data.postsTwo.posts.map((x, i) => (\r\n                    <React.Fragment key={`${i}-${user}-${x.id}-2`}>\r\n                        <List>\r\n                            <PostTwo item={x} user={user} />\r\n                        </List>\r\n                        {data.postsTwo.hasMore && i === data.postsTwo.posts.length - 5 && (\r\n                            <Waypoint\r\n                                onEnter={() => {\r\n                                    fetchMore({\r\n                                        variables: {\r\n                                            user: user,\r\n                                            limit: 5,\r\n                                            cursor: parseInt(data.postsTwo.posts[data.postsTwo.posts.length - 1].id),\r\n                                        },\r\n                                        updateQuery: (pv, { fetchMoreResult }) => {\r\n                                            if (!fetchMoreResult) {\r\n                                                return pv;\r\n                                            }\r\n\r\n                                            return {\r\n                                                postsTwo: {\r\n                                                    __typename: 'PostsType',\r\n                                                    hasMore: fetchMoreResult.postsTwo.hasMore,\r\n                                                    posts: [...pv.postsTwo.posts, ...fetchMoreResult.postsTwo.posts],\r\n                                                },\r\n                                            };\r\n                                        },\r\n                                    });\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </React.Fragment>\r\n                ))}\r\n            </center>\r\n        </div>\r\n    );\r\n};\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { client } from '../..';\r\nimport { PostCreatorTwo } from '../../components/cqrs/PostCreator2';\r\nimport { PostsDataTwo } from '../../components/cqrs/PostsData2';\r\nimport { Header } from '../../components/Header';\r\nimport { postsTwoQuery } from '../../graphql/post';\r\nimport { meQuery } from '../../graphql/user';\r\n\r\nexport function HomeTwo() {\r\n    const [state, setState] = useState(0);\r\n\r\n    let user = null;\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    if (cache && cache.me) {\r\n        user = cache.me.id;\r\n    }\r\n\r\n    const query = useQuery(meQuery, {\r\n        skip: cache,\r\n    });\r\n\r\n    if (query && query.me) {\r\n        user = query.me.id;\r\n    }\r\n\r\n    const { loading, data, fetchMore, refetch } = useQuery(postsTwoQuery, {\r\n        variables: {\r\n            user: user,\r\n            limit: 10,\r\n            cursor: 0,\r\n        },\r\n        fetchPolicy: 'network-only',\r\n    });\r\n\r\n    // const location = useLocation();\r\n    // if (location.state && location.state.refetch) {\r\n    //     setState(state + 1);\r\n    //     client.refetchQueries({ include: 'active' });\r\n    //     location.state.refetch = false;\r\n    // }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Header props />\r\n            </div>\r\n            <br />\r\n            <div>\r\n                <PostCreatorTwo user={user} refetch={refetch} />\r\n                <PostsDataTwo user={user} loading={loading} data={data} fetchMore={fetchMore} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { useMutation } from '@apollo/client';\r\nimport { useRef, useState } from 'react';\r\nimport { createPostThreeQuery } from '../../graphql/post';\r\nimport { TextField, Button, Container } from '@material-ui/core';\r\n\r\nexport function PostCreatorThree({ user, refetch }) {\r\n    const [createPost] = useMutation(createPostThreeQuery);\r\n    const [content, setContent] = useState('');\r\n    const submit = useRef(0);\r\n\r\n    return (\r\n        <div style={{ marginTop: 50 }}>\r\n            <Container>\r\n                <form\r\n                    onSubmitCapture={async (e) => {\r\n                        e.preventDefault();\r\n\r\n                        if (user !== null) {\r\n                            await createPost({\r\n                                variables: {\r\n                                    user,\r\n                                    content,\r\n                                },\r\n                            });\r\n\r\n                            refetch();\r\n                            setContent('');\r\n                            submit.current.style.visibility = 'hidden';\r\n                        }\r\n                    }}\r\n                >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        multiline\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        placeholder=\"Create your post\"\r\n                        minRows={4}\r\n                        value={content}\r\n                        style={{ textAlign: 'left' }}\r\n                        onChange={(e) => {\r\n                            submit.current.style.visibility = !e.target.value ? 'hidden' : 'visible';\r\n                            setContent(e.target.value);\r\n                        }}\r\n                    />\r\n                    <center>\r\n                        <Button\r\n                            ref={submit}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            type=\"primary\"\r\n                            style={{ visibility: 'hidden' }}\r\n                        >\r\n                            create a post\r\n                        </Button>\r\n                    </center>\r\n                </form>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport { likePostThree, unlikePostThree } from '../../graphql/like';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, IconButton, Grid, ListItem, ListItemText, ListItemIcon } from '@material-ui/core';\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles({\r\n    post: {\r\n        maxWidth: 1250,\r\n        minWidth: 100,\r\n        marginTop: 15,\r\n    },\r\n});\r\n\r\nexport function PostThree({ item, user }) {\r\n    const classes = useStyles();\r\n    const [likeButton, setLikeButton] = useState(item.isLikedByUser ? Favorite : FavoriteBorder);\r\n    const [likeButtonText, setLikeButtonText] = useState(item.likes);\r\n    const [like] = useMutation(likePostThree);\r\n    const [unlike] = useMutation(unlikePostThree);\r\n\r\n    return (\r\n        <Grid item xs>\r\n            <Paper elevation={3} className={classes.post}>\r\n                <ListItem>\r\n                    <ListItemText\r\n                        style={{ wordWrap: 'break-word' }}\r\n                        primary={item.user.name}\r\n                        secondary={item.content}\r\n                    />\r\n                    <ListItemIcon>\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            key={`${item.id}-3`}\r\n                            onClick={async () => {\r\n                                if (likeButton === Favorite) {\r\n                                    setLikeButton(FavoriteBorder);\r\n                                    setLikeButtonText(parseInt(likeButtonText) - 1);\r\n                                    await unlike({ variables: { user: user, post: item.id } });\r\n                                } else {\r\n                                    setLikeButton(Favorite);\r\n                                    setLikeButtonText(parseInt(likeButtonText) + 1);\r\n                                    await like({ variables: { user: user, post: item.id } });\r\n                                }\r\n                            }}\r\n                        >\r\n                            <IconText icon={likeButton} text={likeButtonText} key={item.id} />\r\n                        </IconButton>\r\n                    </ListItemIcon>\r\n                </ListItem>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nconst IconText = ({ icon, text }) => (\r\n    <div>\r\n        {React.createElement(icon)}\r\n        {text}\r\n    </div>\r\n);\r\n","import React from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport { List } from '@material-ui/core';\r\nimport { PostThree } from './Post3';\r\n\r\nexport const PostsDataThree = ({ user, loading, data, fetchMore }) => {\r\n    if (loading) return <div></div>;\r\n\r\n    return (\r\n        <div>\r\n            <center>\r\n                {data.postsThree.posts.map((x, i) => (\r\n                    <React.Fragment key={`${i}-${user}-${x.id}-3`}>\r\n                        <List>\r\n                            <PostThree item={x} user={user} />\r\n                        </List>\r\n                        {data.postsThree.hasMore && i === data.postsThree.posts.length - 5 && (\r\n                            <Waypoint\r\n                                onEnter={() => {\r\n                                    fetchMore({\r\n                                        variables: {\r\n                                            user: user,\r\n                                            limit: 5,\r\n                                            cursor: parseInt(\r\n                                                data.postsThree.posts[data.postsThree.posts.length - 1].id\r\n                                            ),\r\n                                        },\r\n                                        updateQuery: (pv, { fetchMoreResult }) => {\r\n                                            if (!fetchMoreResult) {\r\n                                                return pv;\r\n                                            }\r\n\r\n                                            return {\r\n                                                postsThree: {\r\n                                                    __typename: 'PostsType',\r\n                                                    hasMore: fetchMoreResult.postsThree.hasMore,\r\n                                                    posts: [\r\n                                                        ...pv.postsThree.posts,\r\n                                                        ...fetchMoreResult.postsThree.posts,\r\n                                                    ],\r\n                                                },\r\n                                            };\r\n                                        },\r\n                                    });\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </React.Fragment>\r\n                ))}\r\n            </center>\r\n        </div>\r\n    );\r\n};\r\n","import { useQuery } from '@apollo/client';\r\nimport React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { client } from '../..';\r\nimport { PostCreatorThree } from '../../components/cqrs/PostCreator3';\r\nimport { PostsDataThree } from '../../components/cqrs/PostsData3';\r\nimport { Header } from '../../components/Header';\r\nimport { postsThreeQuery } from '../../graphql/post';\r\nimport { meQuery } from '../../graphql/user';\r\n\r\nexport function HomeThree() {\r\n    const [state, setState] = useState(0);\r\n\r\n    let user = null;\r\n    const cache = client.readQuery({ query: meQuery });\r\n\r\n    if (cache && cache.me) {\r\n        user = cache.me.id;\r\n    }\r\n\r\n    const query = useQuery(meQuery, {\r\n        skip: cache,\r\n    });\r\n\r\n    if (query && query.me) {\r\n        user = query.me.id;\r\n    }\r\n\r\n    const { loading, data, fetchMore, refetch } = useQuery(postsThreeQuery, {\r\n        variables: {\r\n            user: user,\r\n            limit: 10,\r\n            cursor: 0,\r\n        },\r\n        fetchPolicy: 'network-only',\r\n    });\r\n\r\n    // const location = useLocation();\r\n    // if (location.state && location.state.refetch) {\r\n    //     setState(state + 1);\r\n    //     client.refetchQueries({ include: 'active' });\r\n    //     location.state.refetch = false;\r\n    // }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Header props />\r\n            </div>\r\n            <br />\r\n            <div>\r\n                <PostCreatorThree user={user} refetch={refetch} />\r\n                <PostsDataThree user={user} loading={loading} data={data} fetchMore={fetchMore} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { BrowserRouter, Switch } from 'react-router-dom';\r\nimport { UserRoute } from '../routes/UserRoute';\r\nimport { PublicRoute } from '../routes/PublicRoute';\r\nimport { Home } from '../views/home';\r\nimport { Login } from '../views/login';\r\nimport { Register } from '../views/register';\r\nimport { HomeOne } from '../views/cqrs/home1';\r\nimport { HomeTwo } from '../views/cqrs/home2';\r\nimport { HomeThree } from '../views/cqrs/home3';\r\n\r\nexport function Routes() {\r\n    return (\r\n        <BrowserRouter>\r\n            <div>\r\n                <Switch>\r\n                    <UserRoute exact path=\"/\" component={Home}></UserRoute>\r\n                    <UserRoute exact path=\"/cqrs1\" component={HomeOne}></UserRoute>\r\n                    <UserRoute exact path=\"/cqrs2\" component={HomeTwo}></UserRoute>\r\n                    <UserRoute exact path=\"/cqrs3\" component={HomeThree}></UserRoute>\r\n                    <PublicRoute exact path=\"/login\" component={Login}></PublicRoute>\r\n                    <PublicRoute exact path=\"/register\" component={Register}></PublicRoute>\r\n                </Switch>\r\n            </div>\r\n        </BrowserRouter>\r\n    );\r\n}\r\n","import { createTheme } from '@material-ui/core';\r\n\r\nexport const darkTheme = createTheme({\r\n    palette: {\r\n        type: 'dark',\r\n    },\r\n});\r\n","import \"@fontsource/roboto\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { ThemeProvider } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { setAccessToken } from \"../utils/token\";\r\nimport { Routes } from \"./Routes\";\r\nimport { darkTheme } from \"../utils/theme\";\r\n\r\nexport function App() {\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetch(\"/auth\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        }).then(async (data) => {\r\n            const { accessToken } = await data.json();\r\n            setAccessToken(accessToken);\r\n            setLoading(false);\r\n        });\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div>...</div>;\r\n    }\r\n\r\n    return (\r\n        <ThemeProvider theme={darkTheme}>\r\n            <div className=\"App\">\r\n                <CssBaseline />\r\n                <Routes />\r\n            </div>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import { getAccessToken, isAccessTokenValid, setAccessToken } from \"./token\";\r\nimport { TokenRefreshLink } from \"apollo-link-token-refresh\";\r\nimport { HttpLink, ApolloLink } from \"@apollo/client\";\r\n\r\nexport const httpLink = new HttpLink({\r\n    uri: \"/graphql\",\r\n    credentials: \"include\",\r\n});\r\n\r\nexport const authLink = new ApolloLink((operation, forward) => {\r\n    const accessToken = getAccessToken();\r\n    operation.setContext(({ headers = {} }) => ({\r\n        headers: {\r\n            ...headers,\r\n            Authorization: accessToken ? `Bearer ${accessToken}` : \"\",\r\n        },\r\n    }));\r\n\r\n    return forward(operation);\r\n});\r\n\r\nexport const tokenRefreshLink = new TokenRefreshLink({\r\n    accessTokenField: \"accessToken\",\r\n    isTokenValidOrUndefined: () => isAccessTokenValid(),\r\n    fetchAccessToken: () => {\r\n        return fetch(\"/auth\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        });\r\n    },\r\n    handleFetch: (accessToken) => {\r\n        setAccessToken(accessToken);\r\n    },\r\n});\r\n","import './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport { ApolloClient, InMemoryCache, from } from '@apollo/client';\nimport { authLink, httpLink, tokenRefreshLink } from './utils/links';\n\nexport const client = new ApolloClient({\n    cache: new InMemoryCache({\n        typePolicies: {\n            posts: {\n                keyFields: ['id', 'userRequesting'],\n            },\n        },\n    }),\n    credentials: 'include',\n    link: from([tokenRefreshLink, authLink, httpLink]),\n});\n\nReactDOM.render(\n    <React.StrictMode>\n        <ApolloProvider client={client}>\n            <App />\n        </ApolloProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}