(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t),n.d(t,"client",(function(){return Wt}));n(139);var r=n(0),a=n.n(r),s=n(20),c=n.n(s),i=n(11),o=n.n(i),u=n(18),j=n(10),l=(n(145),n(216)),b=n(215),d=n(118),O="";function p(e){O=e}function h(){return O}var m,x,f,v,y,g,k,w,$,T,S,I,P,C,D=n(32),M=n(24),q=n(34),W=n(97),N=n(224),U=n(22),R=n(223),Q=Object(R.a)(m||(m=Object(U.a)(["\n    {\n        me {\n            id\n            name\n            email\n        }\n    }\n"]))),E=(Object(R.a)(x||(x=Object(U.a)(["\n    {\n        users {\n            id\n            name\n            email\n        }\n    }\n"]))),Object(R.a)(f||(f=Object(U.a)(["\n    mutation createUser($name: String!, $email: String!, $password: String!) {\n        createUser(user: { name: $name, email: $email, password: $password }) {\n            id\n            name\n            email\n        }\n    }\n"])))),L=Object(R.a)(v||(v=Object(U.a)(["\n    mutation loginUser($email: String!, $password: String!) {\n        loginUser(email: $email, password: $password) {\n            accessToken\n            user {\n                id\n                name\n                email\n            }\n        }\n    }\n"]))),A=Object(R.a)(y||(y=Object(U.a)(["\n    mutation {\n        logoutUser\n    }\n"]))),B=Object(R.a)(g||(g=Object(U.a)(["\n    mutation {\n        fullLogoutUser\n    }\n"]))),F=n(1),_=["component"],z=function(e){var t=e.component,n=Object(W.a)(e,_),r=Wt.readQuery({query:Q}),a=Object(N.a)(Q,{fetchPolicy:"network-only",skip:r}).data,s=!1;return(r&&r.me||a&&a.me)&&(s=!0),Object(F.jsx)(M.b,Object(q.a)(Object(q.a)({},n),{},{render:function(e){return s?Object(F.jsx)(t,Object(q.a)({},e)):Object(F.jsx)(M.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},V=["component"],G=function(e){var t=e.component,n=Object(W.a)(e,V),r=Wt.readQuery({query:Q}),a=Object(N.a)(Q,{fetchPolicy:"network-only",skip:r}).data,s=!1;return(r&&r.me||a&&a.me)&&(s=!0),Object(F.jsx)(M.b,Object(q.a)(Object(q.a)({},n),{},{render:function(e){return s?Object(F.jsx)(M.a,{to:{pathname:"/",state:{from:e.location}}}):Object(F.jsx)(t,Object(q.a)({},e))}}))},H=n(225),J=n(193),K=n(202),X=n(204),Y=n(99),Z=n(205),ee=n(196),te=n(197),ne=Object(J.a)((function(){return{root:{flexGrow:1},title:{flexGrow:1},button:{margin:5,color:"inherit"}}}));function re(e){var t=e.children,n=Object(ee.a)();return Object(F.jsx)(te.a,{appear:!1,direction:"down",in:!n,children:t})}function ae(e){var t=ne(),n=Object(M.g)(),r=Object(H.a)(A),a=Object(j.a)(r,2),s=a[0],c=a[1].client,i=Object(H.a)(B),l=Object(j.a)(i,1)[0],b=c.readQuery({query:Q}),d=Object(N.a)(Q,{fetchPolicy:"network-only",skip:b}).data,O=!1;return(b&&b.me||d&&d.me)&&(O=!0),O?Object(F.jsx)(re,Object(q.a)(Object(q.a)({},e),{},{block:"true",children:Object(F.jsx)(K.a,{position:"fixed",children:Object(F.jsxs)(X.a,{children:[Object(F.jsxs)(Y.a,{variant:"h5",className:t.title,children:["Hello, ",b.me.name,"!"]}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push({pathname:"/",state:{refetch:!0}});case 1:case"end":return e.stop()}}),e)}))),children:"Home"}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push({pathname:"/cqrs1",state:{refetch:!0}});case 1:case"end":return e.stop()}}),e)}))),children:"CQRS 1"}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push({pathname:"/cqrs2",state:{refetch:!0}});case 1:case"end":return e.stop()}}),e)}))),children:"CQRS 2"}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push({pathname:"/cqrs3",state:{refetch:!0}});case 1:case"end":return e.stop()}}),e)}))),children:"CQRS 3"}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return p(""),e.next=5,c.resetStore();case 5:n.push("/login");case 6:case"end":return e.stop()}}),e)}))),children:"Logout"}),Object(F.jsx)(Z.a,{className:t.button,onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return p(""),e.next=5,c.resetStore();case 5:n.push("/login");case 6:case"end":return e.stop()}}),e)}))),children:"Logout everywhere"})]})})})):Object(F.jsxs)("header",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(D.b,{to:"/login",children:"login"})}),Object(F.jsx)("div",{children:Object(F.jsx)(D.b,{to:"/register",children:"register"})})]})}var se=Object(R.a)(k||(k=Object(U.a)(["\n    query posts($user: ID!, $limit: Int!, $cursor: Int!) {\n        posts(user: $user, limit: $limit, cursor: $cursor) {\n            hasMore\n            posts {\n                id\n                content\n                likes\n                userRequesting\n                isLikedByUser\n                user {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),ce=Object(R.a)(w||(w=Object(U.a)(["\n    query postsOne($user: ID!, $limit: Int!, $cursor: Int!) {\n        postsOne(user: $user, limit: $limit, cursor: $cursor) {\n            hasMore\n            posts {\n                id\n                content\n                likes\n                userRequesting\n                isLikedByUser\n                user {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),ie=Object(R.a)($||($=Object(U.a)(["\n    query postsTwo($user: ID!, $limit: Int!, $cursor: Int!) {\n        postsTwo(user: $user, limit: $limit, cursor: $cursor) {\n            hasMore\n            posts {\n                id\n                content\n                likes\n                userRequesting\n                isLikedByUser\n                user {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),oe=Object(R.a)(T||(T=Object(U.a)(["\n    query postsThree($user: ID!, $limit: Int!, $cursor: Int!) {\n        postsThree(user: $user, limit: $limit, cursor: $cursor) {\n            hasMore\n            posts {\n                id\n                content\n                likes\n                userRequesting\n                isLikedByUser\n                user {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),ue=Object(R.a)(S||(S=Object(U.a)(["\n    mutation createPost($user: ID!, $content: String!) {\n        createPost(user: $user, content: $content) {\n            id\n            content\n        }\n    }\n"]))),je=Object(R.a)(I||(I=Object(U.a)(["\n    mutation createPostOne($user: ID!, $content: String!) {\n        createPostOne(user: $user, content: $content) {\n            id\n            content\n        }\n    }\n"]))),le=Object(R.a)(P||(P=Object(U.a)(["\n    mutation createPostTwo($user: ID!, $content: String!) {\n        createPostTwo(user: $user, content: $content)\n    }\n"]))),be=Object(R.a)(C||(C=Object(U.a)(["\n    mutation createPostThree($user: ID!, $content: String!) {\n        createPostThree(user: $user, content: $content)\n    }\n"]))),de=n(206),Oe=n(219);function pe(e){var t=e.user,n=e.refetch,a=Object(H.a)(ue),s=Object(j.a)(a,1)[0],c=Object(r.useState)(""),i=Object(j.a)(c,2),l=i[0],b=i[1],d=Object(r.useRef)(0);return Object(F.jsx)("div",{style:{marginTop:50},children:Object(F.jsx)(de.a,{children:Object(F.jsxs)("form",{onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),null===t){e.next=7;break}return e.next=4,s({variables:{user:t,content:l}});case 4:n(),b(""),d.current.style.visibility="hidden";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsx)(Oe.a,{variant:"outlined",multiline:!0,fullWidth:!0,margin:"normal",placeholder:"Create your post",minRows:4,value:l,style:{textAlign:"left"},onChange:function(e){d.current.style.visibility=e.target.value?"visible":"hidden",b(e.target.value)}}),Object(F.jsx)("center",{children:Object(F.jsx)(Z.a,{ref:d,variant:"contained",color:"secondary",type:"primary",style:{visibility:"hidden"},children:"create a post"})})]})})})}var he,me,xe,fe,ve,ye,ge,ke,we=n(40),$e=n(57),Te=Object(R.a)(he||(he=Object(U.a)(["\n    mutation likePost($user: ID!, $post: ID!) {\n        likePost(user: $user, post: $post)\n    }\n"]))),Se=Object(R.a)(me||(me=Object(U.a)(["\n    mutation likePostOne($user: ID!, $post: ID!) {\n        likePostOne(user: $user, post: $post)\n    }\n"]))),Ie=Object(R.a)(xe||(xe=Object(U.a)(["\n    mutation likePostTwo($user: ID!, $post: ID!) {\n        likePostTwo(user: $user, post: $post)\n    }\n"]))),Pe=Object(R.a)(fe||(fe=Object(U.a)(["\n    mutation likePostThree($user: ID!, $post: ID!) {\n        likePostThree(user: $user, post: $post)\n    }\n"]))),Ce=Object(R.a)(ve||(ve=Object(U.a)(["\n    mutation unlikePost($user: ID!, $post: ID!) {\n        unlikePost(user: $user, post: $post)\n    }\n"]))),De=Object(R.a)(ye||(ye=Object(U.a)(["\n    mutation unlikePostOne($user: ID!, $post: ID!) {\n        unlikePostOne(user: $user, post: $post)\n    }\n"]))),Me=Object(R.a)(ge||(ge=Object(U.a)(["\n    mutation unlikePostTwo($user: ID!, $post: ID!) {\n        unlikePostTwo(user: $user, post: $post)\n    }\n"]))),qe=Object(R.a)(ke||(ke=Object(U.a)(["\n    mutation unlikePostThree($user: ID!, $post: ID!) {\n        unlikePostThree(user: $user, post: $post)\n    }\n"]))),We=n(210),Ne=n(162),Ue=n(211),Re=n(212),Qe=n(213),Ee=n(214),Le=n(208),Ae=n(209),Be=Object(J.a)({post:{maxWidth:1250,minWidth:100,marginTop:15}});function Fe(e){var t=e.item,n=e.user,a=Be(),s=Object(r.useState)(t.isLikedByUser?Le.a:Ae.a),c=Object(j.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(t.likes),d=Object(j.a)(b,2),O=d[0],p=d[1],h=Object(H.a)(Te),m=Object(j.a)(h,1)[0],x=Object(H.a)(Ce),f=Object(j.a)(x,1)[0];return Object(F.jsx)(We.a,{item:!0,xs:!0,children:Object(F.jsx)(Ne.a,{elevation:3,className:a.post,children:Object(F.jsxs)(Ue.a,{children:[Object(F.jsx)(Re.a,{style:{wordWrap:"break-word"},primary:t.user.name,secondary:t.content}),Object(F.jsx)(Qe.a,{children:Object(F.jsx)(Ee.a,{size:"small",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==Le.a){e.next=7;break}return l(Ae.a),p(parseInt(O)-1),e.next=5,f({variables:{user:n,post:t.id}});case 5:e.next=11;break;case 7:return l(Le.a),p(parseInt(O)+1),e.next=11,m({variables:{user:n,post:t.id}});case 11:case"end":return e.stop()}}),e)}))),children:Object(F.jsx)(_e,{icon:i,text:O},t.id)},t.id)})]})})})}var _e=function(e){var t=e.icon,n=e.text;return Object(F.jsxs)("div",{children:[a.a.createElement(t),n]})},ze=n(207),Ve=function(e){var t=e.user,n=e.loading,r=e.data,s=e.fetchMore;return n?Object(F.jsx)("div",{children:"..."}):Object(F.jsx)("div",{children:Object(F.jsx)("center",{children:r.posts.posts.map((function(e,n){return Object(F.jsxs)(a.a.Fragment,{children:[Object(F.jsx)(ze.a,{children:Object(F.jsx)(Fe,{item:e,user:t})}),r.posts.hasMore&&n===r.posts.posts.length-5&&Object(F.jsx)($e.a,{onEnter:function(){s({variables:{user:t,limit:5,cursor:parseInt(r.posts.posts[r.posts.posts.length-1].id)},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?{posts:{__typename:"PostsType",hasMore:n.posts.hasMore,posts:[].concat(Object(we.a)(e.posts.posts),Object(we.a)(n.posts.posts))}}:e}})}})]},"".concat(n,"-").concat(t,"-").concat(e.id))}))})})};function Ge(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),n=(t[0],t[1],null),a=Wt.readQuery({query:Q});a&&a.me&&(n=a.me.id);var s=Object(N.a)(Q,{skip:a});s&&s.me&&(n=s.me.id);var c=Object(N.a)(se,{variables:{user:n,limit:5,cursor:0},fetchPolicy:"network-only"}),i=c.loading,o=c.data,u=c.fetchMore,l=c.refetch;return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(ae,{props:!0})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(pe,{user:n,refetch:l}),Object(F.jsx)(Ve,{user:n,loading:i,data:o,fetchMore:u})]})]})}var He=n(227),Je=n(95),Ke=n.n(Je),Xe=Object(J.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ye(e){var t=e.history,n=Xe(),a=Object(r.useState)(""),s=Object(j.a)(a,2),c=s[0],i=s[1],l=Object(r.useState)(""),b=Object(j.a)(l,2),d=b[0],O=b[1],h=Object(H.a)(L),m=Object(j.a)(h,1)[0];return Object(F.jsx)(de.a,{component:"main",maxWidth:"xs",children:Object(F.jsxs)("div",{className:n.paper,children:[Object(F.jsx)(He.a,{className:n.avatar,children:Object(F.jsx)(Ke.a,{})}),Object(F.jsx)(Y.a,{component:"h1",variant:"h5",color:"textPrimary",children:"Sign in"}),Object(F.jsxs)("form",{className:n.form,noValidate:!0,onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,m({variables:{email:c,password:d},update:function(e,t){var n=t.data;if(!n.loginUser)return null;e.writeQuery({query:Q,data:{me:n.loginUser.user}})}});case 3:return(r=e.sent)&&r.data.loginUser&&p(r.data.loginUser.accessToken),e.next=7,Wt.clearStore();case 7:t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsx)(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){i(e.target.value)}}),Object(F.jsx)(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){O(e.target.value)}}),Object(F.jsx)(Z.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign In"}),Object(F.jsx)(We.a,{container:!0,children:Object(F.jsx)(We.a,{item:!0,children:Object(F.jsx)(D.b,{to:"/register",variant:"body2",style:{textDecoration:"none"},children:Object(F.jsx)(Y.a,{color:"textSecondary",children:"Don't have an account? Sign Up"})})})})]})]})})}function Ze(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}var et=Object(J.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function tt(e){var t=e.history,n=et(),a=Object(r.useState)(""),s=Object(j.a)(a,2),c=s[0],i=s[1],l=Object(r.useState)(""),b=Object(j.a)(l,2),d=b[0],O=b[1],p=Object(r.useState)(""),h=Object(j.a)(p,2),m=h[0],x=h[1],f=Object(H.a)(E),v=Object(j.a)(f,1)[0];return Object(F.jsx)(de.a,{component:"main",maxWidth:"xs",children:Object(F.jsxs)("div",{className:n.paper,children:[Object(F.jsx)(He.a,{className:n.avatar,children:Object(F.jsx)(Ke.a,{})}),Object(F.jsx)(Y.a,{component:"h1",variant:"h5",color:"textPrimary",children:"Sign up"}),Object(F.jsxs)("form",{className:n.form,noValidate:!0,onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!Ze(d)){e.next=5;break}return e.next=4,v({variables:{name:c,email:d,password:m}});case 4:t.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsxs)(We.a,{container:!0,spacing:2,children:[Object(F.jsx)(We.a,{item:!0,xs:12,children:Object(F.jsx)(Oe.a,{autoComplete:"name",name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,onChange:function(e){i(e.target.value)}})}),Object(F.jsx)(We.a,{item:!0,xs:12,children:Object(F.jsx)(Oe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){O(e.target.value)}})}),Object(F.jsx)(We.a,{item:!0,xs:12,children:Object(F.jsx)(Oe.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){x(e.target.value)}})})]}),Object(F.jsx)(Z.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign Up"}),Object(F.jsx)(We.a,{container:!0,justifyContent:"flex-end",children:Object(F.jsx)(We.a,{item:!0,children:Object(F.jsx)(D.b,{to:"/login",variant:"body2",style:{textDecoration:"none"},children:Object(F.jsx)(Y.a,{color:"textSecondary",children:"Already have an account? Sign in"})})})})]})]})})}function nt(e){var t=e.user,n=e.refetch,a=Object(H.a)(je),s=Object(j.a)(a,1)[0],c=Object(r.useState)(""),i=Object(j.a)(c,2),l=i[0],b=i[1],d=Object(r.useRef)(0);return Object(F.jsx)("div",{style:{marginTop:50},children:Object(F.jsx)(de.a,{children:Object(F.jsxs)("form",{onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),null===t){e.next=7;break}return e.next=4,s({variables:{user:t,content:l}});case 4:n(),b(""),d.current.style.visibility="hidden";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsx)(Oe.a,{variant:"outlined",multiline:!0,fullWidth:!0,margin:"normal",placeholder:"Create your post",minRows:4,value:l,style:{textAlign:"left"},onChange:function(e){d.current.style.visibility=e.target.value?"visible":"hidden",b(e.target.value)}}),Object(F.jsx)("center",{children:Object(F.jsx)(Z.a,{ref:d,variant:"contained",color:"secondary",type:"primary",style:{visibility:"hidden"},children:"create a post"})})]})})})}var rt=Object(J.a)({post:{maxWidth:1250,minWidth:100,marginTop:15}});function at(e){var t=e.item,n=e.user,a=rt(),s=Object(r.useState)(t.isLikedByUser?Le.a:Ae.a),c=Object(j.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(t.likes),d=Object(j.a)(b,2),O=d[0],p=d[1],h=Object(H.a)(Se),m=Object(j.a)(h,1)[0],x=Object(H.a)(De),f=Object(j.a)(x,1)[0];return Object(F.jsx)(We.a,{item:!0,xs:!0,children:Object(F.jsx)(Ne.a,{elevation:3,className:a.post,children:Object(F.jsxs)(Ue.a,{children:[Object(F.jsx)(Re.a,{style:{wordWrap:"break-word"},primary:t.user.name,secondary:t.content}),Object(F.jsx)(Qe.a,{children:Object(F.jsx)(Ee.a,{size:"small",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==Le.a){e.next=7;break}return l(Ae.a),p(parseInt(O)-1),e.next=5,f({variables:{user:n,post:t.id}});case 5:e.next=11;break;case 7:return l(Le.a),p(parseInt(O)+1),e.next=11,m({variables:{user:n,post:t.id}});case 11:case"end":return e.stop()}}),e)}))),children:Object(F.jsx)(st,{icon:i,text:O},t.id)},"".concat(t.id,"-1"))})]})})})}var st=function(e){var t=e.icon,n=e.text;return Object(F.jsxs)("div",{children:[a.a.createElement(t),n]})},ct=function(e){var t=e.user,n=e.loading,r=e.data,s=e.fetchMore;return n?Object(F.jsx)("div",{}):Object(F.jsx)("div",{children:Object(F.jsx)("center",{children:r.postsOne.posts.map((function(e,n){return Object(F.jsxs)(a.a.Fragment,{children:[Object(F.jsx)(ze.a,{children:Object(F.jsx)(at,{item:e,user:t})}),r.postsOne.hasMore&&n===r.postsOne.posts.length-5&&Object(F.jsx)($e.a,{onEnter:function(){s({variables:{user:t,limit:5,cursor:parseInt(r.postsOne.posts[r.postsOne.posts.length-1].id)},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?{postsOne:{__typename:"PostsType",hasMore:n.postsOne.hasMore,posts:[].concat(Object(we.a)(e.postsOne.posts),Object(we.a)(n.postsOne.posts))}}:e}})}})]},"".concat(n,"-").concat(t,"-").concat(e.id,"-1"))}))})})};function it(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),n=(t[0],t[1],null),a=Wt.readQuery({query:Q});a&&a.me&&(n=a.me.id);var s=Object(N.a)(Q,{skip:a});s&&s.me&&(n=s.me.id);var c=Object(N.a)(ce,{variables:{user:n,limit:10,cursor:0},fetchPolicy:"network-only"}),i=c.loading,o=c.data,u=c.fetchMore,l=c.refetch;return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(ae,{props:!0})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(nt,{user:n,refetch:l}),Object(F.jsx)(ct,{user:n,loading:i,data:o,fetchMore:u})]})]})}function ot(e){var t=e.user,n=e.refetch,a=Object(H.a)(le),s=Object(j.a)(a,1)[0],c=Object(r.useState)(""),i=Object(j.a)(c,2),l=i[0],b=i[1],d=Object(r.useRef)(0);return Object(F.jsx)("div",{style:{marginTop:50},children:Object(F.jsx)(de.a,{children:Object(F.jsxs)("form",{onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),null===t){e.next=7;break}return e.next=4,s({variables:{user:t,content:l}});case 4:n(),b(""),d.current.style.visibility="hidden";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsx)(Oe.a,{variant:"outlined",multiline:!0,fullWidth:!0,margin:"normal",placeholder:"Create your post",minRows:4,value:l,style:{textAlign:"left"},onChange:function(e){d.current.style.visibility=e.target.value?"visible":"hidden",b(e.target.value)}}),Object(F.jsx)("center",{children:Object(F.jsx)(Z.a,{ref:d,variant:"contained",color:"secondary",type:"primary",style:{visibility:"hidden"},children:"create a post"})})]})})})}var ut=Object(J.a)({post:{maxWidth:1250,minWidth:100,marginTop:15}});function jt(e){var t=e.item,n=e.user,a=ut(),s=Object(r.useState)(t.isLikedByUser?Le.a:Ae.a),c=Object(j.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(t.likes),d=Object(j.a)(b,2),O=d[0],p=d[1],h=Object(H.a)(Ie),m=Object(j.a)(h,1)[0],x=Object(H.a)(Me),f=Object(j.a)(x,1)[0];return Object(F.jsx)(We.a,{item:!0,xs:!0,children:Object(F.jsx)(Ne.a,{elevation:3,className:a.post,children:Object(F.jsxs)(Ue.a,{children:[Object(F.jsx)(Re.a,{style:{wordWrap:"break-word"},primary:t.user.name,secondary:t.content}),Object(F.jsx)(Qe.a,{children:Object(F.jsx)(Ee.a,{size:"small",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==Le.a){e.next=7;break}return l(Ae.a),p(parseInt(O)-1),e.next=5,f({variables:{user:n,post:t.id}});case 5:e.next=11;break;case 7:return l(Le.a),p(parseInt(O)+1),e.next=11,m({variables:{user:n,post:t.id}});case 11:case"end":return e.stop()}}),e)}))),children:Object(F.jsx)(lt,{icon:i,text:O},t.id)},"".concat(t.id,"-2"))})]})})})}var lt=function(e){var t=e.icon,n=e.text;return Object(F.jsxs)("div",{children:[a.a.createElement(t),n]})},bt=function(e){var t=e.user,n=e.loading,r=e.data,s=e.fetchMore;return n?Object(F.jsx)("div",{}):Object(F.jsx)("div",{children:Object(F.jsx)("center",{children:r.postsTwo.posts.map((function(e,n){return Object(F.jsxs)(a.a.Fragment,{children:[Object(F.jsx)(ze.a,{children:Object(F.jsx)(jt,{item:e,user:t})}),r.postsTwo.hasMore&&n===r.postsTwo.posts.length-5&&Object(F.jsx)($e.a,{onEnter:function(){s({variables:{user:t,limit:5,cursor:parseInt(r.postsTwo.posts[r.postsTwo.posts.length-1].id)},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?{postsTwo:{__typename:"PostsType",hasMore:n.postsTwo.hasMore,posts:[].concat(Object(we.a)(e.postsTwo.posts),Object(we.a)(n.postsTwo.posts))}}:e}})}})]},"".concat(n,"-").concat(t,"-").concat(e.id,"-2"))}))})})};function dt(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),n=(t[0],t[1],null),a=Wt.readQuery({query:Q});a&&a.me&&(n=a.me.id);var s=Object(N.a)(Q,{skip:a});s&&s.me&&(n=s.me.id);var c=Object(N.a)(ie,{variables:{user:n,limit:10,cursor:0},fetchPolicy:"network-only"}),i=c.loading,o=c.data,u=c.fetchMore,l=c.refetch;return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(ae,{props:!0})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(ot,{user:n,refetch:l}),Object(F.jsx)(bt,{user:n,loading:i,data:o,fetchMore:u})]})]})}function Ot(e){var t=e.user,n=e.refetch,a=Object(H.a)(be),s=Object(j.a)(a,1)[0],c=Object(r.useState)(""),i=Object(j.a)(c,2),l=i[0],b=i[1],d=Object(r.useRef)(0);return Object(F.jsx)("div",{style:{marginTop:50},children:Object(F.jsx)(de.a,{children:Object(F.jsxs)("form",{onSubmitCapture:function(){var e=Object(u.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),null===t){e.next=7;break}return e.next=4,s({variables:{user:t,content:l}});case 4:n(),b(""),d.current.style.visibility="hidden";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(F.jsx)(Oe.a,{variant:"outlined",multiline:!0,fullWidth:!0,margin:"normal",placeholder:"Create your post",minRows:4,value:l,style:{textAlign:"left"},onChange:function(e){d.current.style.visibility=e.target.value?"visible":"hidden",b(e.target.value)}}),Object(F.jsx)("center",{children:Object(F.jsx)(Z.a,{ref:d,variant:"contained",color:"secondary",type:"primary",style:{visibility:"hidden"},children:"create a post"})})]})})})}var pt=Object(J.a)({post:{maxWidth:1250,minWidth:100,marginTop:15}});function ht(e){var t=e.item,n=e.user,a=pt(),s=Object(r.useState)(t.isLikedByUser?Le.a:Ae.a),c=Object(j.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(t.likes),d=Object(j.a)(b,2),O=d[0],p=d[1],h=Object(H.a)(Pe),m=Object(j.a)(h,1)[0],x=Object(H.a)(qe),f=Object(j.a)(x,1)[0];return Object(F.jsx)(We.a,{item:!0,xs:!0,children:Object(F.jsx)(Ne.a,{elevation:3,className:a.post,children:Object(F.jsxs)(Ue.a,{children:[Object(F.jsx)(Re.a,{style:{wordWrap:"break-word"},primary:t.user.name,secondary:t.content}),Object(F.jsx)(Qe.a,{children:Object(F.jsx)(Ee.a,{size:"small",onClick:Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==Le.a){e.next=7;break}return l(Ae.a),p(parseInt(O)-1),e.next=5,f({variables:{user:n,post:t.id}});case 5:e.next=11;break;case 7:return l(Le.a),p(parseInt(O)+1),e.next=11,m({variables:{user:n,post:t.id}});case 11:case"end":return e.stop()}}),e)}))),children:Object(F.jsx)(mt,{icon:i,text:O},t.id)},"".concat(t.id,"-3"))})]})})})}var mt=function(e){var t=e.icon,n=e.text;return Object(F.jsxs)("div",{children:[a.a.createElement(t),n]})},xt=function(e){var t=e.user,n=e.loading,r=e.data,s=e.fetchMore;return n?Object(F.jsx)("div",{}):Object(F.jsx)("div",{children:Object(F.jsx)("center",{children:r.postsThree.posts.map((function(e,n){return Object(F.jsxs)(a.a.Fragment,{children:[Object(F.jsx)(ze.a,{children:Object(F.jsx)(ht,{item:e,user:t})}),r.postsThree.hasMore&&n===r.postsThree.posts.length-5&&Object(F.jsx)($e.a,{onEnter:function(){s({variables:{user:t,limit:5,cursor:parseInt(r.postsThree.posts[r.postsThree.posts.length-1].id)},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?{postsThree:{__typename:"PostsType",hasMore:n.postsThree.hasMore,posts:[].concat(Object(we.a)(e.postsThree.posts),Object(we.a)(n.postsThree.posts))}}:e}})}})]},"".concat(n,"-").concat(t,"-").concat(e.id,"-3"))}))})})};function ft(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),n=(t[0],t[1],null),a=Wt.readQuery({query:Q});a&&a.me&&(n=a.me.id);var s=Object(N.a)(Q,{skip:a});s&&s.me&&(n=s.me.id);var c=Object(N.a)(oe,{variables:{user:n,limit:10,cursor:0},fetchPolicy:"network-only"}),i=c.loading,o=c.data,u=c.fetchMore,l=c.refetch;return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(ae,{props:!0})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(Ot,{user:n,refetch:l}),Object(F.jsx)(xt,{user:n,loading:i,data:o,fetchMore:u})]})]})}function vt(){return Object(F.jsx)(D.a,{children:Object(F.jsx)("div",{children:Object(F.jsxs)(M.d,{children:[Object(F.jsx)(z,{exact:!0,path:"/",component:Ge}),Object(F.jsx)(z,{exact:!0,path:"/cqrs1",component:it}),Object(F.jsx)(z,{exact:!0,path:"/cqrs2",component:dt}),Object(F.jsx)(z,{exact:!0,path:"/cqrs3",component:ft}),Object(F.jsx)(G,{exact:!0,path:"/login",component:Ye}),Object(F.jsx)(G,{exact:!0,path:"/register",component:tt})]})})})}var yt=n(127),gt=Object(yt.a)({palette:{type:"dark"}});var kt=function(){var e=Object(r.useState)(!0),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){fetch("/auth",{method:"POST",credentials:"include"}).then(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,p(n.accessToken),a(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n?Object(F.jsx)("div",{children:"..."}):Object(F.jsx)(b.a,{theme:gt,children:Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(l.a,{}),Object(F.jsx)(vt,{})]})})},wt=n(218),$t=n(220),Tt=n(222),St=n(217),It=n(128),Pt=n(221),Ct=n(96),Dt=new Pt.a({uri:"/graphql",credentials:"include"}),Mt=new Ct.a((function(e,t){var n=h();return e.setContext((function(e){var t=e.headers,r=void 0===t?{}:t;return{headers:Object(q.a)(Object(q.a)({},r),{},{Authorization:n?"Bearer ".concat(n):""})}})),t(e)})),qt=new It.a({accessTokenField:"accessToken",isTokenValidOrUndefined:function(){return function(){var e=h();if(!e)return!0;try{var t=Object(d.a)(e).exp;return Date.now()<1e3*t}catch(n){return!1}}()},fetchAccessToken:function(){return fetch("/auth",{method:"POST",credentials:"include"})},handleFetch:function(e){p(e)}}),Wt=new $t.a({cache:new Tt.a({typePolicies:{posts:{keyFields:["id","userRequesting"]}}}),credentials:"include",link:Object(St.a)([qt,Mt,Dt])});c.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(wt.a,{client:Wt,children:Object(F.jsx)(kt,{})})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.40b944d5.chunk.js.map